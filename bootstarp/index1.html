<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1">-->
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>bootstrap</title>
    <link rel="stylesheet" type="text/css" href="stylesheets/style.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
    <!--[if IE]>
        <script src="js/html5.js"></script>
    <![endif]-->
    <!--[if it IE 9]>
        <script src="js/css3-mediaqueries.js"></script>
    <![endif]-->
</head>

<body>
    <div class="container-fluid hid hide">
        <!-- 头部 -->
        <div class="row head-bg">
            <div class="col-md-12"><img src="images/logo.png">小蚂蚁移动教学平台</div>
        </div>
        <!-- 左边导航 -->
        <div class="row">
            <div class="col-md-2 nav">
                <ul class="nav-outer">
                    <li>
                        <a><img src="images/icon1.png">
                            <br/>教学进度</a>
                    </li>
                    <li>
                        <a><img src="images/icon2.png">
                            <br/>题库中心</a>
                    </li>
                    <li>
                        <a><img src="images/icon3.png">
                            <br/>备课</a>
                    </li>
                    <li>
                        <a class="hover"><img src="images/icon4.png">
                            <br/>统计＋回顾</a>
                        <!-- 子导航 -->
                        <ul class="nav-in">
                            <li><a>课堂讲义回顾</a></li>
                            <li><a class="hover-in">课堂练习回顾</a></li>
                            <li><a>家庭作业回顾</a></li>
                        </ul>
                    </li>
                    <li>
                        <a><img src="images/icon5.png">
                            <br/>资源中心</a>
                    </li>s
                </ul>
            </div>
            <!-- 右边内容 -->
            <div class="col-md-10">
                <!-- 内容顶部信息 -->
                <div class="row content-top">
                    <!-- 内容顶部左边 -->
                    <div class="col-md-9 content-l"><img src="images/position.png">教学进度&nbsp;&gt;&nbsp;教学进度管理</div>
                    <!-- 内容顶部右边 -->
                    <div class="col-md-3 content-r">
                        <form class="form-inline">
                            <div class="form-group">
                                <div class="input-group content-r">
                                    <input type="text" class="form-control" id="exampleInputAmount" placeholder="">
                                    <div class="input-group-addon"><img src="images/seo.png"></div>
                                </div>
                            </div>
                    </div>
                </div>
                <!-- 内容中间 -->
                <div class="row">
                    <!-- 内容中间左边，表格标题 -->
                    <div class="col-md-9 content-c">教学进度</div>
                    <!-- 内容中间右边，按钮 -->
                    <div class="col-md-3 but">
                        <button type="button" class="btn btn-warning"><img src="images/insert.png">添加教学进度</button>
                        <button type="button" class="btn btn-default"><img src="images/delete.png">删除</button>
                    </div>
                </div>
                <!-- 内容下面 -->
                <div class="row">
                    <div class="col-md-12  foot">
                        <table class="table table-bordered table-hover table-striped">
                            <thead>
                                <tr>
                                    <th>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;标题</th>
                                    <th>描述</th>
                                    <th>添加时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="checkbox">
                                        </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三年级数学第一章第一单元第二课时</td>
                                    <td>三角形的面积</td>
                                    <td>2015-12-03</td>
                                    <td><img src="images/selection.png"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 退出 -->
    <div class="quit">
        <input type="button" value="退出" id="quit" />
    </div>
    <!-- 表格 -->
    <div class="table-responsive">
        <table class="table table-bordered">
            <tr>
                <th>newsid</th>
                <th>newstitle</th>
                <th>newsimg</th>
                <th>newstext</th>
                <th>newsdate</th>
                <th>navdate</th>
                <th></th>
                <th></th>
            </tr>
            <!--             <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td class="update"><a>修改</a></td>
                <td><a>删除</a></td>
            </tr> -->
        </table>
    </div>
    <button type="button" class="btn btn-primary btn-lg btn-block" id="add">新增</button>
    <button type="button" class="btn btn-default btn-lg btn-block" id="lookUp">查找</button>
    <!-- 表单 -->
    <div class="slide">
        <form>
            <div class="form-group">
                <label for="exampleInputName2">新闻ID</label>
                <input type="text" class="form-control" placeholder="新闻ID" id="newsid" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻标题</label>
                <input type="text" class="form-control" placeholder="新闻标题" id="newstitle" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻图片</label>
                <input type="text" class="form-control" placeholder="新闻图片" id="newsimg" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻内容</label>
                <input type="text" class="form-control" placeholder="新闻内容" id="newstext" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻时间</label>
                <input type="text" class="form-control" placeholder="新闻时间" id="newsdate" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">选择导航</label>
                <input type="text" class="form-control" placeholder="选择导航" id="navdate" />
            </div>
            <button type="button" class="btn btn-primary btn-lg btn-block" id="submit1">提交</button>
            <button type="button" class="btn btn-default btn-lg btn-block resets">重置</button>
        </form>
    </div>
    <!-- 表单 -->
    <div class="slide1">
        <form>
            <div class="form-group">
                <label for="exampleInputName2">新闻ID</label>
                <input type="text" class="form-control" placeholder="新闻ID" id="newsid1" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻标题</label>
                <input type="text" class="form-control" placeholder="新闻标题" id="newstitle1" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻图片</label>
                <input type="text" class="form-control" placeholder="新闻图片" id="newsimg1" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻内容</label>
                <input type="text" class="form-control" placeholder="新闻内容" id="newstext1" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻时间</label>
                <input type="text" class="form-control" placeholder="新闻时间" id="newsdate1" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">选择导航</label>
                <input type="text" class="form-control" placeholder="选择导航" id="navdate1" />
            </div>
            <button type="button" class="btn btn-primary btn-lg btn-block" id="submit2">提交</button>
            <button type="button" class="btn btn-default btn-lg btn-block">重置</button>
        </form>
    </div>
    <!-- 表单 -->
    <div class="slide2">
        <p>提示：输入下面条件查询的任意一项，如果存在就能快速匹配到整个数据</p>
        <form>
            <div class="form-group">
                <label for="exampleInputName2">新闻ID</label>
                <input type="text" class="form-control" placeholder="新闻ID" id="newsid2" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻标题</label>
                <input type="text" class="form-control" placeholder="新闻标题" id="newstitle2" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻图片</label>
                <input type="text" class="form-control" placeholder="新闻图片" id="newsimg2" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻内容</label>
                <input type="text" class="form-control" placeholder="新闻内容" id="newstext2" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">新闻时间</label>
                <input type="text" class="form-control" placeholder="新闻时间" id="newsdate2" />
            </div>
            <div class="form-group">
                <label for="exampleInputName2">选择导航</label>
                <input type="text" class="form-control" placeholder="选择导航" id="navdate2" />
            </div>
            <button type="button" class="btn btn-primary btn-lg btn-block" id="submit3">确认查找</button>
            <button type="button" class="btn btn-default btn-lg btn-block resets">重置</button>
        </form>
    </div>
    <script type="text/javascript" src="js/jquery-2.1.4.js"></script>
    <script type="text/javascript" src="js/xss.js"></script>
    <script type="text/javascript">

    // var test = filterXSS('<script>alert("xss");</scr' + 'ipt>');
    // alert(test);
    // 点击退出
    $("#quit").click(function(){
        window.location.href="./index.html";
    });
    // 点击新增
    $(document).ready(function() {
        $("#add,.slide").click(function(e) {
            $(".slide").slideDown(500);
            e.stopPropagation();
        });
        $(".slide1").click(function(e) {
            $(".slide1").slideDown(500);
            e.stopPropagation();
        });
        $("#lookUp,.slide2").click(function(e) {
            $(".slide2").slideDown(500);
            e.stopPropagation();
        });
        $(document).click(function() {
            $(".slide,.slide1,.slide2").slideUp(500);
            $(".slide,.slide1,.slide2").find("input").each(function(index) {
                $(".slide,.slide1,.slide2").find("input").eq(index).val("");
            });
        });
        // 点击修改

        // $("table").on('click','.update',function(e){
        //     $(".slide").slideDown(500);
        //     // 修改的时候将table的值赋予input中
        //     var data1={};
        //         $(".update").siblings().not($(".update").next()).each(function(index){
        //             data1[index]=$(".update").siblings().eq(index).text();
        //         });

        //         $(".slide").find("input").each(function(index){
        //         $(".slide").find("input").eq(index).val(data1[index]);
        //         });
        //     //阻止事件的传播 
        //     e.stopPropagation();
        //     // console.log($(".trs").length());
        // });


        // function clicks(){

        // }
        // $(".update").siblings().each() 
        // $(".update").siblings().each(function(index){

        // });
        // 点击删除


        // 点击重置
        $(".resets").click(function() {
            $("input").val("");
        });


        // 点击新增提交增加数据
        $("#submit1").click(function(e) {
            var string=$("#newstitle").val(),
                string1=$("#newsimg").val(),
                string2=$("#newstext").val(),
                data=$("#newsdate").val(),
                number=$("#navdate").val();
            $.ajax({
                url: "http://localhost:3900/hello2/"+string+"/"+string1+"/"+string2+"/"+data+"/"+number,
                type: "GET",
                dataType: "json",
                // data: {
                //     // newstitle: $("#newstitle").val(),
                //     // newsimg: $("#newsimg").val(),
                //     // newstext: $("#newstext").val(),
                //     // newsdate: $("#newsdate").val(),
                //     // navdate: $("#navdate").val()
                // },
                success: function(data) {
                    if (data.status == "addErr") {
                        alert("新增失败");
                    }
                        // 将数据库最后一条数据显示到前台
                        // $.ajax({
                        //     type: "GET",
                        //     url: "lastData.php",
                        //     dataType: "json",
                        //     success: function(data) {
                                //console.log(data);
                                $(data[data.length - 1]).each(function(index) {
                                    // trData();
                                    var trs = $("<tr></tr>").appendTo("table").addClass("trs");
                                    $("<td></td>").appendTo(trs).text(this.newsid);
                                    $("<td></td>").appendTo(trs).text(this.newstitle);
                                    $("<td></td>").appendTo(trs).text(this.newsimg);
                                    $("<td></td>").appendTo(trs).text(this.newstext);
                                    $("<td></td>").appendTo(trs).text(this.newsdate);
                                    $("<td></td>").appendTo(trs).text(this.navdate);
                                    $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("update")).text("修改");
                                    $("<a>").appendTo($("<td></td>").appendTo(trs)).text("删除");
                                });
                        //     }
                        // });
                        // 让提交收起
                        $(".slide").slideUp(500);
                        $(".slide").find("input").each(function(index) {
                            $(".slide").find("input").eq(index).val("");
                        });

                        window.location.reload();

                    //}

                }
            });
        });
        // 将数据库数据显示到前台
        $.ajax({
            type: "GET",
            url: "http://localhost:3900/hello1/",
            dataType: "json",
            success: function(data) {
                // console.log(data[data.length-1]);
                $(data).each(function(index) {
                    // trData();
                    var trs = $("<tr></tr>").appendTo("table").addClass("trs");
                    var time=new Date(this.newsdate);
                    $("<td></td>").appendTo(trs).text(this.newsid).addClass("sort");
                    $("<td></td>").appendTo(trs).text(this.newstitle);
                    $("<td></td>").appendTo(trs).text(this.newsimg);
                    $("<td></td>").appendTo(trs).text(this.newstext);
                    $("<td></td>").appendTo(trs).text(time.toLocaleDateString());
                    $("<td></td>").appendTo(trs).text(this.navdate);
                    $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("update")).text("修改");
                    $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("deletes")).text("删除");
                    // console.log(data[index]);

                });

                // 修改的时候将table的值赋予input中
                $(".update").each(function(index) {
                    // var update=$(this).find(".update");
                    var thiss = $(this);
                    thiss.click(function(e) {
                        $(".slide1").slideDown(500);
                        e.stopPropagation();
                        var data1 = {};
                        thiss.siblings().each(function(index) {
                            data1[index] = thiss.siblings().eq(index).text();
                            // console.log(data1[index]);
                        });

                        $(".slide1").find("input").each(function(index) {
                            $(".slide1").find("input").eq(index).val(data1[index]);
                        });

                    });
                    // console.log($(data).length);

                });

                //删除数据
                $(".deletes").each(function(index) {
                    $(this).click(function(index) {
                        var num = $(this).siblings().eq(0).text();
                        alert("确定删除newsid=" + num + "数据吗？");

                        $(this).parent().remove();

                        var idd=num;
                        $.ajax({
                            url: "http://localhost:3900/hello4/"+idd,
                            dataType: "json",
                            type: "get",
                            // data: {
                            //     newsid: num
                            // },
                            success: function(data) {
                                if(data.status=="deleteErr"){
                                    alert("删除失败");
                                }
                                // alert(data.msg);
                            }
                        });

                        // console.log($(this).siblings().eq(0).text());
                    });
                });



            }
        });



        // //删除数据
        // $("table").find("tr").each(function(index){
        //     $("table").on("click",".deletes",function(index){
        //         var num=$(this).siblings().eq(0).text();
        //         //alert("确定删除newsid="+num+"数据吗？");

        //         $(this).parent().remove();

        //         // console.log($(this).siblings().eq(0).text());
        //     });
        // });

        // 点击修改提交
        $("#submit2").click(function(e) {

            // var id=$("#newsid1").val(),
            //     strings=filterXSS($("#newstitle1").val()),
            //     strings1=filterXSS($("#newsimg1").val()),
            //     strings2=$("#newstext1").val(),
            //     datas=filterXSS($("#newsdate1").val()),
            //     numbers=$("#navdate1").val();

            $.ajax({
                url: "http://localhost:3900/change",
                type: "post",
                dataType: "json",
                data: {
                    id: $("#newsid1").val(),
                    strings: $("#newstitle1").val(),
                    strings1: $("#newsimg1").val(),
                    strings2: $("#newstext1").val(),
                    datas: $("#newsdate1").val(),
                    numbers: $("#navdate1").val()
                },
                success: function(data) {

                    if (data.status == "changeErr") {
                        alert("修改失败");
                    }
                        // 让提交收起
                        $(".slide1").slideUp(500);
                        $(".slide1").find("input").each(function(index) {
                            $(".slide1").find("input").eq(index).val("");
                        });


                        window.location.reload(); //刷新当前页面

                    // }

                }
            });
        });
        // 查找数据
        $("#submit3").click(function() {
            if ($("#newsid2").val() == "" && $("#newstitle2").val() == "" && $("#newsimg2").val() == "" && $("#newstext2").val() == "" && $("#newsdate2").val() == ""&& $("#navdate2").val() == "") {

                alert("至少要输入一项查找内容");
            } else {

                // var idc=$("#newsid2").val(),
                //  stringc=filterXSS($("#newstitle2").val()),
                //  stringc1= filterXSS($("#newsimg2").val()),
                //  stringc2= $("#newstext2").val(),
                //  datac= filterXSS($("#newsdate2").val()),
                //  numberc= $("#navdate2").val();
            // function Escape(sHtml) {
            //          return sHtml.replace(/[<>&".|]/g,function(c){return {'<':'&lt;','>':'&gt;','&':'&amp;','"':'&quot;','.':'&middot;','|':'&brvbar;'}[c];});
            // }

               
                $.ajax({
                     url: "http://localhost:3900/lookup",
                    //url: "http://localhost:3900/hello5/"+idc,
                    type: "POST",
                    dataType: "json",
                    data: {
                        idc: $("#newsid2").val(),
                        stringc: $("#newstitle2").val(),
                        stringc1: $("#newsimg2").val(),
                        stringc2: $("#newstext2").val(),
                        datac: $("#newsdate2").val(),
                        numberc: $("#navdate2").val()
                    },
                    success: function(data) {
                        //console.log(data);
                        //var objs={};

                        // if(data.look=="id"){
                        //     // window.location.href="http://localhost:3900/lookId/"+idc;
                        //     $.ajax({
                        //         url:"http://localhost:3900/lookId/"+idc,
                        //         type:"get",
                        //         dataType:"json",
                        //         success: function(data){

                        //             $(".trs").remove();
                        //             $(data).each(function(index) {
                        //                 // trData();
                        //                 var trs = $("<tr></tr>").appendTo("table").addClass("trs");
                        //                 var time=new Date(this.newsdate);
                        //                 $("<td></td>").appendTo(trs).text(this.newsid);
                        //                 $("<td></td>").appendTo(trs).text(this.newstitle);
                        //                 $("<td></td>").appendTo(trs).text(this.newsimg);
                        //                 $("<td></td>").appendTo(trs).text(this.newstext);
                        //                 $("<td></td>").appendTo(trs).text(time.toLocaleDateString());
                        //                 $("<td></td>").appendTo(trs).text(this.navdate);
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("update")).text("修改");
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("deletes")).text("删除");
                        //                 // console.log(data[index]);
                        //             });

                        //         }
                        //     });
                        // }else if(data.look=="title"){
                        //     $.ajax({
                        //         url:"http://localhost:3900/lookTitle/"+stringc,
                        //         type:"get",
                        //         dataType:"json",
                        //         success: function(data){

                        //             $(".trs").remove();
                        //             $(data).each(function(index) {
                        //                 // trData();
                        //                 var trs = $("<tr></tr>").appendTo("table").addClass("trs");
                        //                 var time=new Date(this.newsdate);
                        //                 $("<td></td>").appendTo(trs).text(this.newsid);
                        //                 $("<td></td>").appendTo(trs).text(this.newstitle);
                        //                 $("<td></td>").appendTo(trs).text(this.newsimg);
                        //                 $("<td></td>").appendTo(trs).text(this.newstext);
                        //                 $("<td></td>").appendTo(trs).text(time.toLocaleDateString());
                        //                 $("<td></td>").appendTo(trs).text(this.navdate);
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("update")).text("修改");
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("deletes")).text("删除");
                        //                 // console.log(data[index]);
                        //             });

                        //         }
                        //     });
                        // }else if(data.look=="img"){
                        //     $.ajax({
                        //         url:"http://localhost:3900/lookImg/"+stringc1,
                        //         type:"get",
                        //         dataType:"json",
                        //         success: function(data){

                        //             $(".trs").remove();
                        //             $(data).each(function(index) {
                        //                 // trData();
                        //                 var trs = $("<tr></tr>").appendTo("table").addClass("trs");
                        //                 var time=new Date(this.newsdate);
                        //                 $("<td></td>").appendTo(trs).text(this.newsid);
                        //                 $("<td></td>").appendTo(trs).text(this.newstitle);
                        //                 $("<td></td>").appendTo(trs).text(this.newsimg);
                        //                 $("<td></td>").appendTo(trs).text(this.newstext);
                        //                 $("<td></td>").appendTo(trs).text(time.toLocaleDateString());
                        //                 $("<td></td>").appendTo(trs).text(this.navdate);
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("update")).text("修改");
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("deletes")).text("删除");
                        //                 // console.log(data[index]);
                        //             });

                        //         }
                        //     });
                        // }else if(data.look=="text"){
                        //     $.ajax({
                        //         url:"http://localhost:3900/lookText/"+stringc2,
                        //         type:"get",
                        //         dataType:"json",
                        //         success: function(data){

                        //             $(".trs").remove();
                        //             $(data).each(function(index) {
                        //                 // trData();
                        //                 var trs = $("<tr></tr>").appendTo("table").addClass("trs");
                        //                 var time=new Date(this.newsdate);
                        //                 $("<td></td>").appendTo(trs).text(this.newsid);
                        //                 $("<td></td>").appendTo(trs).text(this.newstitle);
                        //                 $("<td></td>").appendTo(trs).text(this.newsimg);
                        //                 $("<td></td>").appendTo(trs).text(this.newstext);
                        //                 $("<td></td>").appendTo(trs).text(time.toLocaleDateString());
                        //                 $("<td></td>").appendTo(trs).text(this.navdate);
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("update")).text("修改");
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("deletes")).text("删除");
                        //                 // console.log(data[index]);
                        //             });

                        //         }
                        //     });
                        // }else if(data.look=="time"){
                        //     $.ajax({
                        //         url:"http://localhost:3900/lookDate/"+datac,
                        //         type:"get",
                        //         dataType:"json",
                        //         success: function(data){

                        //             $(".trs").remove();
                        //             $(data).each(function(index) {
                        //                 // trData();
                        //                 var trs = $("<tr></tr>").appendTo("table").addClass("trs");
                        //                 var time=new Date(this.newsdate);
                        //                 $("<td></td>").appendTo(trs).text(this.newsid);
                        //                 $("<td></td>").appendTo(trs).text(this.newstitle);
                        //                 $("<td></td>").appendTo(trs).text(this.newsimg);
                        //                 $("<td></td>").appendTo(trs).text(this.newstext);
                        //                 $("<td></td>").appendTo(trs).text(time.toLocaleDateString());
                        //                 $("<td></td>").appendTo(trs).text(this.navdate);
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("update")).text("修改");
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("deletes")).text("删除");
                        //                 // console.log(data[index]);
                        //             });

                        //         }
                        //     });
                        // }else if(data.look=="nav"){
                        //     $.ajax({
                        //         url:"http://localhost:3900/lookNav/"+numberc,
                        //         type:"get",
                        //         dataType:"json",
                        //         success: function(data){


                        //             $(".trs").remove();
                        //             $(data).each(function(index) {
                        //                 // trData();
                        //                 var trs = $("<tr></tr>").appendTo("table").addClass("trs");
                        //                 var time=new Date(this.newsdate);
                        //                 $("<td></td>").appendTo(trs).text(this.newsid);
                        //                 $("<td></td>").appendTo(trs).text(this.newstitle);
                        //                 $("<td></td>").appendTo(trs).text(this.newsimg);
                        //                 $("<td></td>").appendTo(trs).text(this.newstext);
                        //                 $("<td></td>").appendTo(trs).text(time.toLocaleDateString());
                        //                 $("<td></td>").appendTo(trs).text(this.navdate);
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("update")).text("修改");
                        //                 $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("deletes")).text("删除");
                        //                 // console.log(data[index]);
                        //             });

                        //         }
                        //     });
                        // }



                        
                            // $(data).each(function() {
                            //     var newsid = this.newsid,
                            //         newstitle = this.newstitle,
                            //         newsimg = this.newsimg,
                            //         newstext = this.newstext,
                            //         newsdate = this.newsdate,
                            //         navdate = this.navdate;

                            //     // 判断拿到的数据与表格的是否一致，把不一致的全部移除
                            //     $(".update").siblings().not(".deletes").each(function(index) {
                            //         var tdData = $(this).text(),
                            //             tdThis = $(this).parent().siblings(),
                            //             tdThis1 = $(this).parent().siblings().not(tdThis.eq(0));

                            //         if (tdData == newsid) {
                            //             tdThis1.remove();
                            //         } 
                            //         else if (tdData == newstitle && tdData == newsid) {
                            //             tdThis1.remove();
                            //         } else if (tdData == newsimg && tdData == newsid) {
                            //             tdThis1.remove();
                            //         } else if (tdData == newstext && tdData == newsid) {
                            //             tdThis1.remove();
                            //         } else if (tdData == newsdate && tdData == newsid) {
                            //             tdThis1.remove();
                            //         } else if (tdData == navdate && tdData == newsid) {
                            //             tdThis1.remove();
                            //         }
                            //     });
                            
                            //     //console.log(newstitle);
                            // });
                            
                            // if(data.status=="idcErr"&&data.status=="stringcErr"&&data.status=="stringc1Err"&&data.status=="stringc2Err"&&data.status=="datacErr"&&data.status=="numbercErr"){
                            //     alert("查询失败");
                            // }

                            if(data.status=="idcErr"){
                                alert("查询失败");
                            }

                            if(data.status=="stringcErr"){
                                alert("查询失败");
                            }

                            if(data.status=="stringc1Err"){
                                alert("查询失败");
                            }

                            if(data.status=="stringc2Err"){
                                alert("查询失败");
                            }

                            if(data.status=="datacErr"){
                                alert("查询失败");
                            }

                            if(data.status=="numbercErr"){
                                alert("查询失败");
                            }

                            if(data==""){
                                alert("没有找到该数据");
                            }


                                    $(".trs").remove();
                                    $(data).each(function(index) {
                                        // trData();
                                        var trs = $("<tr></tr>").appendTo("table").addClass("trs");
                                        var time=new Date(this.newsdate);
                                        $("<td></td>").appendTo(trs).text(this.newsid);
                                        $("<td></td>").appendTo(trs).text(this.newstitle);
                                        $("<td></td>").appendTo(trs).text(this.newsimg);
                                        $("<td></td>").appendTo(trs).text(this.newstext);
                                        $("<td></td>").appendTo(trs).text(time.toLocaleDateString());
                                        $("<td></td>").appendTo(trs).text(this.navdate);
                                        $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("update")).text("修改");
                                        $("<a>").appendTo($("<td></td>").appendTo(trs).addClass("deletes")).text("删除");
                                        // console.log(data[index]);
                                    });




                        // 查找成功之后自动收起来
                        $(".slide2").slideUp(500);

                        // 返回首页
                        $("#add").text("返回首页");

                        $("#add").click(function() {
                            window.location.reload();
                        });


                    }
                });
            }

        });








    });
    </script>
</body>

</html>
